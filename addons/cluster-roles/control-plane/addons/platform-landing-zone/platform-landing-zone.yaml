apiVersion: v1
kind: ConfigMap
metadata:
  name: platform-landing-zone-dashboard
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
  annotations:
    grafana_folder: "Platform"
data:
  platform-landing-zone.json: |
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {"type": "grafana", "uid": "-- Grafana --"},
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "description": "Central landing zone for the homelab platform â€” cluster health, service directory, ArgoCD application status, resource usage, active alerts, and error logs at a glance.",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 1,
      "id": null,
      "links": [
        {"title": "ArgoCD Overview", "url": "/d/argocd-overview/argocd-overview", "type": "link", "icon": "external link", "tooltip": "ArgoCD sync & health details", "targetBlank": false},
        {"title": "Kratix Platform", "url": "/d/kratix-platform/kratix-platform", "type": "link", "icon": "external link", "tooltip": "Kratix promise status", "targetBlank": false},
        {"title": "vCluster Fleet", "url": "/d/vcluster-fleet-health/vcluster-fleet-health", "type": "link", "icon": "external link", "tooltip": "vCluster fleet health", "targetBlank": false},
        {"title": "Kubernetes Logs", "url": "/d/loki-k8s-logs/loki-kubernetes-logs", "type": "link", "icon": "external link", "tooltip": "Loki log explorer", "targetBlank": false},
        {"title": "Trivy Security", "url": "/d/trivy-operator/trivy-operator-dashboard", "type": "link", "icon": "external link", "tooltip": "Vulnerability scanning", "targetBlank": false}
      ],
      "panels": [
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0},
          "id": 100,
          "title": "Cluster Health",
          "type": "row"
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Number of nodes in Ready condition. Should match your expected node count (3 control-plane nodes).",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 2}, {"color": "green", "value": 3}]}
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 0, "y": 1},
          "id": 1,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Nodes Ready",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum(kube_node_status_condition{condition=\"Ready\", status=\"true\"})", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Total pods in Running phase across all namespaces.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 4, "y": 1},
          "id": 2,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Running Pods",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(kube_pod_status_phase{phase=\"Running\"} == 1)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Total ArgoCD applications being managed.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 8, "y": 1},
          "id": 3,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "ArgoCD Apps",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(argocd_app_info)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Applications with sync_status=Synced. All apps should ideally be synced.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 12, "y": 1},
          "id": 4,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Synced",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(argocd_app_info{sync_status=\"Synced\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Applications that are out of sync with their git source. These need attention â€” either a sync is pending or drift has occurred.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "orange", "value": 1}]}
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 16, "y": 1},
          "id": 5,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Out of Sync",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(argocd_app_info{sync_status=\"OutOfSync\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Currently firing alerts across the cluster. Click to view details in Alertmanager.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "orange", "value": 1}, {"color": "red", "value": 5}]},
              "links": [{"title": "Open Alertmanager", "url": "https://alertmanager.cluster.integratn.tech", "targetBlank": true}]
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 20, "y": 1},
          "id": 6,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Firing Alerts",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(ALERTS{alertstate=\"firing\", alertname!=\"Watchdog\", alertname!=\"InfoInhibitor\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 5},
          "id": 101,
          "title": "Service Directory",
          "type": "row"
        },
        {
          "gridPos": {"h": 7, "w": 8, "x": 0, "y": 6},
          "id": 7,
          "options": {
            "code": {"language": "plaintext", "showLineNumbers": false, "showMiniMap": false},
            "content": "### â˜¸ï¸ Platform\n\n| Service | |\n|---|---|\n| ðŸš€ **ArgoCD** | [Open â†’](https://argocd.cluster.integratn.tech) |\n| ðŸ”‘ **Authentik** | [Open â†’](https://auth.cluster.integratn.tech) |\n| ðŸ§© **Kratix** | [Dashboard â†’](/d/kratix-platform/kratix-platform) |",
            "mode": "markdown"
          },
          "title": "",
          "transparent": true,
          "type": "text"
        },
        {
          "gridPos": {"h": 7, "w": 8, "x": 8, "y": 6},
          "id": 8,
          "options": {
            "code": {"language": "plaintext", "showLineNumbers": false, "showMiniMap": false},
            "content": "### ðŸ“Š Observability\n\n| Service | |\n|---|---|\n| ðŸ“ˆ **Grafana** | [Open â†’](https://grafana.cluster.integratn.tech) |\n| ðŸ“Š **Prometheus** | [Open â†’](https://prometheus.cluster.integratn.tech) |\n| ðŸ”” **Alertmanager** | [Open â†’](https://alertmanager.cluster.integratn.tech) |\n| ðŸ“ **Loki** | [Open â†’](https://loki.cluster.integratn.tech) |\n| ðŸŒ **Hubble UI** | [Open â†’](https://hubble.cluster.integratn.tech) |",
            "mode": "markdown"
          },
          "title": "",
          "transparent": true,
          "type": "text"
        },
        {
          "gridPos": {"h": 7, "w": 8, "x": 16, "y": 6},
          "id": 9,
          "options": {
            "code": {"language": "plaintext", "showLineNumbers": false, "showMiniMap": false},
            "content": "### ðŸ›¡ï¸ Security & Resources\n\n| Service | |\n|---|---|\n| ðŸ›¡ï¸ **Trivy Explorer** | [Open â†’](https://trivy.cluster.integratn.tech) |\n| ðŸ“‹ **Goldilocks** | [Open â†’](https://goldilocks.cluster.integratn.tech) |\n| ðŸ”’ **Trivy Dashboard** | [Dashboard â†’](/d/trivy-operator/trivy-operator-dashboard) |\n| ðŸ–¥ï¸ **vCluster Fleet** | [Dashboard â†’](/d/vcluster-fleet-health/vcluster-fleet-health) |",
            "mode": "markdown"
          },
          "title": "",
          "transparent": true,
          "type": "text"
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 13},
          "id": 102,
          "title": "ðŸ”¥ Fix These First",
          "type": "row"
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Applications currently out of sync with git â€” your immediate work queue. Click any app name to jump straight to its ArgoCD page and investigate. Empty table = all synced (the goal state).",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "custom": {"align": "auto", "cellOptions": {"type": "auto"}, "inspect": false, "filterable": true},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]},
              "noValue": "âœ… All applications synced"
            },
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "Application"},
                "properties": [
                  {"id": "links", "value": [{"title": "Open in ArgoCD â†’", "url": "https://argocd.cluster.integratn.tech/applications/argocd/${__data.fields.Application}", "targetBlank": true}]},
                  {"id": "custom.width", "value": 240},
                  {"id": "custom.cellOptions", "value": {"type": "color-text"}},
                  {"id": "color", "value": {"fixedColor": "#FF9830", "mode": "fixed"}}
                ]
              },
              {
                "matcher": {"id": "byName", "options": "Health"},
                "properties": [
                  {"id": "custom.cellOptions", "value": {"type": "color-background", "mode": "basic"}},
                  {"id": "mappings", "value": [{"type": "value", "options": {"Healthy": {"color": "green", "index": 0, "text": "ðŸ’š Healthy"}, "Degraded": {"color": "red", "index": 1, "text": "ðŸ”´ Degraded"}, "Progressing": {"color": "yellow", "index": 2, "text": "ðŸ”„ Progressing"}, "Missing": {"color": "orange", "index": 3, "text": "âš ï¸ Missing"}, "Suspended": {"color": "blue", "index": 4, "text": "â¸ï¸ Suspended"}, "Unknown": {"color": "text", "index": 5, "text": "â“ Unknown"}}}]},
                  {"id": "custom.width", "value": 140}
                ]
              },
              {"matcher": {"id": "byName", "options": "Project"}, "properties": [{"id": "custom.width", "value": 130}]},
              {"matcher": {"id": "byName", "options": "Namespace"}, "properties": [{"id": "custom.width", "value": 150}]}
            ]
          },
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 14},
          "id": 30,
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {"show": true, "reducer": ["count"], "countRows": true, "fields": ""},
            "sortBy": [{"displayName": "Application", "desc": false}]
          },
          "title": "âš ï¸ OutOfSync Applications",
          "type": "table",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "argocd_app_info{sync_status!=\"Synced\"}", "format": "table", "instant": true, "refId": "A"}],
          "transformations": [{"id": "organize", "options": {"excludeByName": {"Time": true, "Value": true, "__name__": true, "instance": true, "job": true, "namespace": true, "dest_server": true, "revision": true, "autosync_enabled": true, "operation_message": true, "operation_retry_count": true, "sync_status": true, "repo": true}, "renameByName": {"name": "Application", "project": "Project", "dest_namespace": "Namespace", "health_status": "Health"}, "indexByName": {"name": 0, "project": 1, "dest_namespace": 2, "health_status": 3}}}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Applications in Degraded health â€” pods crashing, services unreachable, or resources in error state. Click any app name to jump to ArgoCD and drill into the failing resources. Empty table = everything healthy.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "custom": {"align": "auto", "cellOptions": {"type": "auto"}, "inspect": false, "filterable": true},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]},
              "noValue": "ðŸ’š All applications healthy"
            },
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "Application"},
                "properties": [
                  {"id": "links", "value": [{"title": "Open in ArgoCD â†’", "url": "https://argocd.cluster.integratn.tech/applications/argocd/${__data.fields.Application}", "targetBlank": true}]},
                  {"id": "custom.width", "value": 240},
                  {"id": "custom.cellOptions", "value": {"type": "color-text"}},
                  {"id": "color", "value": {"fixedColor": "red", "mode": "fixed"}}
                ]
              },
              {
                "matcher": {"id": "byName", "options": "Sync Status"},
                "properties": [
                  {"id": "custom.cellOptions", "value": {"type": "color-background", "mode": "basic"}},
                  {"id": "mappings", "value": [{"type": "value", "options": {"Synced": {"color": "green", "index": 0, "text": "âœ… Synced"}, "OutOfSync": {"color": "orange", "index": 1, "text": "âš ï¸ OutOfSync"}, "Unknown": {"color": "text", "index": 2, "text": "â“ Unknown"}}}]},
                  {"id": "custom.width", "value": 140}
                ]
              },
              {"matcher": {"id": "byName", "options": "Project"}, "properties": [{"id": "custom.width", "value": 130}]},
              {"matcher": {"id": "byName", "options": "Namespace"}, "properties": [{"id": "custom.width", "value": 150}]}
            ]
          },
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 14},
          "id": 31,
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {"show": true, "reducer": ["count"], "countRows": true, "fields": ""},
            "sortBy": [{"displayName": "Application", "desc": false}]
          },
          "title": "ðŸ”´ Degraded Applications",
          "type": "table",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "argocd_app_info{health_status=\"Degraded\"}", "format": "table", "instant": true, "refId": "A"}],
          "transformations": [{"id": "organize", "options": {"excludeByName": {"Time": true, "Value": true, "__name__": true, "instance": true, "job": true, "namespace": true, "dest_server": true, "revision": true, "autosync_enabled": true, "operation_message": true, "operation_retry_count": true, "health_status": true, "repo": true}, "renameByName": {"name": "Application", "project": "Project", "dest_namespace": "Namespace", "sync_status": "Sync Status"}, "indexByName": {"name": 0, "project": 1, "dest_namespace": 2, "sync_status": 3}}}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "All ArgoCD-managed applications with their current sync and health status. Click an application name to open it in ArgoCD.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "custom": {
                "align": "auto",
                "cellOptions": {"type": "auto"},
                "inspect": false,
                "filterable": true
              },
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}
            },
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "Application"},
                "properties": [
                  {"id": "links", "value": [{"title": "Open in ArgoCD", "url": "https://argocd.cluster.integratn.tech/applications/argocd/${__data.fields.Application}", "targetBlank": true}]},
                  {"id": "custom.width", "value": 280}
                ]
              },
              {
                "matcher": {"id": "byName", "options": "Sync Status"},
                "properties": [
                  {"id": "custom.cellOptions", "value": {"type": "color-background", "mode": "basic"}},
                  {"id": "mappings", "value": [
                    {"type": "value", "options": {"Synced": {"color": "green", "index": 0, "text": "âœ… Synced"}, "OutOfSync": {"color": "orange", "index": 1, "text": "âš ï¸ Out of Sync"}, "Unknown": {"color": "text", "index": 2, "text": "â“ Unknown"}}}
                  ]},
                  {"id": "custom.width", "value": 150}
                ]
              },
              {
                "matcher": {"id": "byName", "options": "Health"},
                "properties": [
                  {"id": "custom.cellOptions", "value": {"type": "color-background", "mode": "basic"}},
                  {"id": "mappings", "value": [
                    {"type": "value", "options": {"Healthy": {"color": "green", "index": 0, "text": "ðŸ’š Healthy"}, "Degraded": {"color": "red", "index": 1, "text": "ðŸ”´ Degraded"}, "Progressing": {"color": "yellow", "index": 2, "text": "ðŸ”„ Progressing"}, "Missing": {"color": "orange", "index": 3, "text": "âš ï¸ Missing"}, "Suspended": {"color": "blue", "index": 4, "text": "â¸ï¸ Suspended"}, "Unknown": {"color": "text", "index": 5, "text": "â“ Unknown"}}}
                  ]},
                  {"id": "custom.width", "value": 150}
                ]
              },
              {
                "matcher": {"id": "byName", "options": "Project"},
                "properties": [{"id": "custom.width", "value": 150}]
              },
              {
                "matcher": {"id": "byName", "options": "Namespace"},
                "properties": [{"id": "custom.width", "value": 180}]
              }
            ]
          },
          "gridPos": {"h": 12, "w": 16, "x": 0, "y": 22},
          "id": 10,
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {"show": true, "reducer": ["count"], "countRows": true, "fields": ""},
            "sortBy": [{"displayName": "Health", "desc": true}]
          },
          "title": "All Applications",
          "type": "table",
          "targets": [
            {
              "datasource": {"type": "prometheus", "uid": "${datasource}"},
              "expr": "argocd_app_info",
              "format": "table",
              "instant": true,
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {"Time": true, "Value": true, "__name__": true, "instance": true, "job": true, "namespace": true, "dest_server": true, "repo": true, "revision": true, "autosync_enabled": true, "operation_message": true, "operation_retry_count": true},
                "renameByName": {"name": "Application", "project": "Project", "dest_namespace": "Namespace", "sync_status": "Sync Status", "health_status": "Health"},
                "indexByName": {"name": 0, "project": 1, "dest_namespace": 2, "sync_status": 3, "health_status": 4}
              }
            }
          ]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Distribution of application health across the cluster.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"}
            },
            "overrides": [
              {"matcher": {"id": "byName", "options": "Healthy"}, "properties": [{"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}}]},
              {"matcher": {"id": "byName", "options": "Degraded"}, "properties": [{"id": "color", "value": {"fixedColor": "red", "mode": "fixed"}}]},
              {"matcher": {"id": "byName", "options": "Progressing"}, "properties": [{"id": "color", "value": {"fixedColor": "yellow", "mode": "fixed"}}]},
              {"matcher": {"id": "byName", "options": "Missing"}, "properties": [{"id": "color", "value": {"fixedColor": "orange", "mode": "fixed"}}]},
              {"matcher": {"id": "byName", "options": "Suspended"}, "properties": [{"id": "color", "value": {"fixedColor": "blue", "mode": "fixed"}}]},
              {"matcher": {"id": "byName", "options": "Unknown"}, "properties": [{"id": "color", "value": {"fixedColor": "text", "mode": "fixed"}}]}
            ]
          },
          "gridPos": {"h": 6, "w": 8, "x": 16, "y": 22},
          "id": 11,
          "options": {
            "displayLabels": ["name", "value"],
            "legend": {"displayMode": "list", "placement": "bottom", "values": ["value"]},
            "pieType": "donut",
            "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false},
            "tooltip": {"mode": "single", "sort": "none"}
          },
          "title": "Health Distribution",
          "type": "piechart",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count by (health_status) (argocd_app_info)", "legendFormat": "{{ health_status }}", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Distribution of application sync status. Ideally all apps should be Synced.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"}
            },
            "overrides": [
              {"matcher": {"id": "byName", "options": "Synced"}, "properties": [{"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}}]},
              {"matcher": {"id": "byName", "options": "OutOfSync"}, "properties": [{"id": "color", "value": {"fixedColor": "orange", "mode": "fixed"}}]},
              {"matcher": {"id": "byName", "options": "Unknown"}, "properties": [{"id": "color", "value": {"fixedColor": "text", "mode": "fixed"}}]}
            ]
          },
          "gridPos": {"h": 6, "w": 8, "x": 16, "y": 28},
          "id": 12,
          "options": {
            "displayLabels": ["name", "value"],
            "legend": {"displayMode": "list", "placement": "bottom", "values": ["value"]},
            "pieType": "donut",
            "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false},
            "tooltip": {"mode": "single", "sort": "none"}
          },
          "title": "Sync Distribution",
          "type": "piechart",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count by (sync_status) (argocd_app_info)", "legendFormat": "{{ sync_status }}", "refId": "A", "instant": true}]
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 34},
          "id": 103,
          "title": "Resource Usage â€” Top Namespaces",
          "type": "row"
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Top 10 namespaces by CPU usage. Helps identify the most resource-hungry workloads at a glance.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"axisCenteredZero": false, "drawStyle": "line", "fillOpacity": 20, "lineWidth": 2, "pointSize": 5, "showPoints": "never", "stacking": {"group": "A", "mode": "none"}},
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 35},
          "id": 13,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "sortBy": "Mean", "sortDesc": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "title": "CPU Usage â€” Top 10 Namespaces",
          "type": "timeseries",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "topk(10, sum by (namespace) (rate(container_cpu_usage_seconds_total{namespace!=\"\", container!=\"\"}[5m])))", "legendFormat": "{{ namespace }}", "refId": "A"}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Top 10 namespaces by memory working set. Memory that cannot be reclaimed â€” sustained growth indicates potential leaks.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"axisCenteredZero": false, "drawStyle": "line", "fillOpacity": 20, "lineWidth": 2, "pointSize": 5, "showPoints": "never", "stacking": {"group": "A", "mode": "none"}},
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 35},
          "id": 14,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "sortBy": "Mean", "sortDesc": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "title": "Memory Usage â€” Top 10 Namespaces",
          "type": "timeseries",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "topk(10, sum by (namespace) (container_memory_working_set_bytes{namespace!=\"\", container!=\"\"}))", "legendFormat": "{{ namespace }}", "refId": "A"}]
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 43},
          "id": 104,
          "title": "Control Plane Golden Signals",
          "type": "row"
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "99th percentile request latency to the Kubernetes API server. High values (>1s) indicate the control plane is under load or etcd is slow. Sustained high latency affects all cluster operations including ArgoCD syncs and Kratix reconciliations.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 0.5}, {"color": "red", "value": 1}]},
              "unit": "s",
              "decimals": 3
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 0, "y": 44},
          "id": 20,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "API Server p99 Latency",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "histogram_quantile(0.99, sum by (le) (rate(apiserver_request_duration_seconds_bucket{verb!~\"WATCH|CONNECT\"}[5m])))", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Rate of API server requests returning 5xx errors. Any sustained error rate indicates control plane issues â€” could be etcd problems, webhook failures, or resource exhaustion.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 0.01}, {"color": "red", "value": 0.1}]},
              "unit": "reqps",
              "decimals": 3
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 4, "y": 44},
          "id": 21,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "API Server Error Rate",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum(rate(apiserver_request_total{code=~\"5..\"}[5m])) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "etcd database fragmentation ratio. Values close to 1.0 mean the DB is well-compacted. Below 0.5 means >50% wasted space â€” consider running etcdctl defrag. Talos auto-compacts but doesn't auto-defrag.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 0.5}, {"color": "green", "value": 0.8}]},
              "unit": "percentunit",
              "decimals": 1
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 8, "y": 44},
          "id": 22,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "etcd Fragmentation Ratio",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "(etcd_mvcc_db_total_size_in_use_in_bytes / etcd_mvcc_db_total_size_in_bytes) or vector(1)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Current etcd database size. The default quota is 2GB for Talos. Approaching the quota causes the cluster to go read-only. Monitor for steady growth â€” if it doesn't plateau, investigate excessive resource creation.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 1073741824}, {"color": "red", "value": 1610612736}]},
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 12, "y": 44},
          "id": 23,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "etcd DB Size",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "etcd_mvcc_db_total_size_in_bytes", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Kratix controller reconciliation error rate over the last 10m. Above 5% is critical â€” promise fulfillment is impaired. Check Kratix controller logs for root cause.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 1}, {"color": "red", "value": 5}]},
              "unit": "percent",
              "decimals": 1
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 16, "y": 44},
          "id": 24,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Kratix Error Rate",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "(sum(rate(controller_runtime_reconcile_errors_total{job=~\".*kratix.*\"}[10m])) / clamp_min(sum(rate(controller_runtime_reconcile_total{job=~\".*kratix.*\"}[10m])), 0.001)) * 100 or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Recent ArgoCD sync failures (non-Succeeded syncs) in the last hour. Correlates with OutOfSync count â€” if syncs are failing, apps won't converge to the desired state.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 1}, {"color": "red", "value": 5}]},
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {"h": 4, "w": 4, "x": 20, "y": 44},
          "id": 25,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "ArgoCD Sync Failures (1h)",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum(increase(argocd_app_sync_total{phase!=\"Succeeded\"}[1h])) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "API server request latency over time (p50, p95, p99) excluding watch/connect. Shows control plane responsiveness trends. Correlated latency spikes with etcd fragmentation or high reconciliation rates may indicate resource pressure.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"axisCenteredZero": false, "drawStyle": "line", "fillOpacity": 10, "lineWidth": 2, "pointSize": 5, "showPoints": "never"},
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 48},
          "id": 26,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom"}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "title": "API Server Latency (p50/p95/p99)",
          "type": "timeseries",
          "targets": [
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "histogram_quantile(0.50, sum by (le) (rate(apiserver_request_duration_seconds_bucket{verb!~\"WATCH|CONNECT\"}[5m])))", "legendFormat": "p50", "refId": "A"},
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "histogram_quantile(0.95, sum by (le) (rate(apiserver_request_duration_seconds_bucket{verb!~\"WATCH|CONNECT\"}[5m])))", "legendFormat": "p95", "refId": "B"},
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "histogram_quantile(0.99, sum by (le) (rate(apiserver_request_duration_seconds_bucket{verb!~\"WATCH|CONNECT\"}[5m])))", "legendFormat": "p99", "refId": "C"}
          ]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "etcd fragmentation ratio over time. Values approaching 0.5 indicate the database needs defragmentation. Track trends â€” a slowly declining ratio is normal between compactions.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"axisCenteredZero": false, "drawStyle": "line", "fillOpacity": 20, "lineWidth": 2, "pointSize": 5, "showPoints": "never"},
              "unit": "percentunit",
              "min": 0,
              "max": 1
            },
            "overrides": []
          },
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 48},
          "id": 27,
          "options": {"legend": {"calcs": ["mean", "min"], "displayMode": "table", "placement": "bottom"}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "title": "etcd Fragmentation Over Time",
          "type": "timeseries",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "etcd_mvcc_db_total_size_in_use_in_bytes / etcd_mvcc_db_total_size_in_bytes", "legendFormat": "in-use / total", "refId": "A"}]
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 56},
          "id": 106,
          "title": "Capacity Headroom",
          "type": "row"
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Cluster-wide CPU utilization: actual usage vs allocatable capacity. Shows how much headroom remains before the cluster is saturated. Above 80% is a warning zone â€” schedule node additions.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"axisCenteredZero": false, "drawStyle": "line", "fillOpacity": 30, "lineWidth": 2, "pointSize": 5, "showPoints": "never", "stacking": {"group": "A", "mode": "none"}},
              "unit": "short"
            },
            "overrides": [
              {"matcher": {"id": "byName", "options": "Allocatable"}, "properties": [{"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}}, {"id": "custom.fillOpacity", "value": 5}, {"id": "custom.lineStyle", "value": {"fill": "dash", "dash": [10, 10]}}]},
              {"matcher": {"id": "byName", "options": "Requested"}, "properties": [{"id": "color", "value": {"fixedColor": "yellow", "mode": "fixed"}}]},
              {"matcher": {"id": "byName", "options": "Used"}, "properties": [{"id": "color", "value": {"fixedColor": "blue", "mode": "fixed"}}]}
            ]
          },
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 57},
          "id": 28,
          "options": {"legend": {"calcs": ["lastNotNull"], "displayMode": "table", "placement": "bottom"}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "title": "CPU: Used vs Requested vs Allocatable",
          "type": "timeseries",
          "targets": [
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum(kube_node_status_allocatable{resource=\"cpu\"})", "legendFormat": "Allocatable", "refId": "A"},
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum(kube_pod_resource_request{resource=\"cpu\"})", "legendFormat": "Requested", "refId": "B"},
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum(rate(container_cpu_usage_seconds_total{container!=\"\"}[5m]))", "legendFormat": "Used", "refId": "C"}
          ]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Cluster-wide memory utilization: actual working set vs allocatable capacity. Memory is less elastic than CPU â€” OOM kills happen at the limit. Above 80% utilization warrants attention.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"axisCenteredZero": false, "drawStyle": "line", "fillOpacity": 30, "lineWidth": 2, "pointSize": 5, "showPoints": "never", "stacking": {"group": "A", "mode": "none"}},
              "unit": "bytes"
            },
            "overrides": [
              {"matcher": {"id": "byName", "options": "Allocatable"}, "properties": [{"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}}, {"id": "custom.fillOpacity", "value": 5}, {"id": "custom.lineStyle", "value": {"fill": "dash", "dash": [10, 10]}}]},
              {"matcher": {"id": "byName", "options": "Requested"}, "properties": [{"id": "color", "value": {"fixedColor": "yellow", "mode": "fixed"}}]},
              {"matcher": {"id": "byName", "options": "Used"}, "properties": [{"id": "color", "value": {"fixedColor": "blue", "mode": "fixed"}}]}
            ]
          },
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 57},
          "id": 29,
          "options": {"legend": {"calcs": ["lastNotNull"], "displayMode": "table", "placement": "bottom"}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "title": "Memory: Used vs Requested vs Allocatable",
          "type": "timeseries",
          "targets": [
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum(kube_node_status_allocatable{resource=\"memory\"})", "legendFormat": "Allocatable", "refId": "A"},
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum(kube_pod_resource_request{resource=\"memory\"})", "legendFormat": "Requested", "refId": "B"},
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum(container_memory_working_set_bytes{container!=\"\"})", "legendFormat": "Used", "refId": "C"}
          ]
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 65},
          "id": 105,
          "title": "Active Alerts",
          "type": "row"
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Number of critical-severity alerts currently firing. These require immediate action â€” typically indicate data loss risk or service outage.",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}, "overrides": []},
          "gridPos": {"h": 3, "w": 8, "x": 0, "y": 66},
          "id": 32,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "ðŸ”´ Critical",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(ALERTS{alertstate=\"firing\", severity=\"critical\", alertname!=\"Watchdog\", alertname!=\"InfoInhibitor\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Number of warning-severity alerts currently firing. These indicate degrading conditions that will become critical if not addressed.",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "orange", "value": 1}]}}, "overrides": []},
          "gridPos": {"h": 3, "w": 8, "x": 8, "y": 66},
          "id": 33,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "ðŸŸ  Warning",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(ALERTS{alertstate=\"firing\", severity=\"warning\", alertname!=\"Watchdog\", alertname!=\"InfoInhibitor\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Number of info-severity alerts currently firing. Typically FYI-level â€” review but not urgent.",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "blue", "value": 1}]}}, "overrides": []},
          "gridPos": {"h": 3, "w": 8, "x": 16, "y": 66},
          "id": 34,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "ðŸ”µ Info",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(ALERTS{alertstate=\"firing\", severity=\"info\", alertname!=\"Watchdog\", alertname!=\"InfoInhibitor\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Currently firing alerts across the cluster (excluding Watchdog and InfoInhibitor). Each row is a distinct alert with its labels.",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "custom": {
                "align": "auto",
                "cellOptions": {"type": "auto"},
                "inspect": false,
                "filterable": true
              },
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}
            },
            "overrides": [
              {
                "matcher": {"id": "byName", "options": "Severity"},
                "properties": [
                  {"id": "custom.cellOptions", "value": {"type": "color-background", "mode": "basic"}},
                  {"id": "mappings", "value": [
                    {"type": "value", "options": {"critical": {"color": "red", "index": 0, "text": "ðŸ”´ Critical"}, "warning": {"color": "orange", "index": 1, "text": "ðŸŸ  Warning"}, "info": {"color": "blue", "index": 2, "text": "ðŸ”µ Info"}, "none": {"color": "text", "index": 3}}}
                  ]},
                  {"id": "custom.width", "value": 130}
                ]
              },
              {
                "matcher": {"id": "byName", "options": "Alert"},
                "properties": [{"id": "custom.width", "value": 300}]
              },
              {
                "matcher": {"id": "byName", "options": "Namespace"},
                "properties": [{"id": "custom.width", "value": 160}]
              }
            ]
          },
          "gridPos": {"h": 8, "w": 24, "x": 0, "y": 69},
          "id": 15,
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {"show": true, "reducer": ["count"], "countRows": true, "fields": ""},
            "sortBy": [{"displayName": "Severity", "desc": true}]
          },
          "title": "Firing Alerts",
          "type": "table",
          "targets": [
            {
              "datasource": {"type": "prometheus", "uid": "${datasource}"},
              "expr": "ALERTS{alertstate=\"firing\", alertname!=\"Watchdog\", alertname!=\"InfoInhibitor\"}",
              "format": "table",
              "instant": true,
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {"Time": true, "Value": true, "__name__": true, "instance": true, "job": true, "alertstate": true, "prometheus": true, "container": true, "endpoint": true, "service": true, "pod": true, "uid": true},
                "renameByName": {"alertname": "Alert", "severity": "Severity", "namespace": "Namespace"},
                "indexByName": {"alertname": 0, "severity": 1, "namespace": 2}
              }
            }
          ]
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 77},
          "id": 107,
          "title": "Recent Error Logs",
          "type": "row"
        },
        {
          "datasource": {"type": "loki", "uid": "${lokids}"},
          "description": "Recent error, panic, and fatal log lines across all namespaces. Use the namespace and pod filters to narrow down.",
          "gridPos": {"h": 10, "w": 24, "x": 0, "y": 78},
          "id": 16,
          "options": {
            "showTime": true,
            "showLabels": true,
            "showCommonLabels": false,
            "wrapLogMessage": true,
            "prettifyLogMessage": false,
            "enableLogDetails": true,
            "sortOrder": "Descending",
            "dedupStrategy": "none"
          },
          "title": "Cluster Error Logs",
          "type": "logs",
          "targets": [
            {
              "datasource": {"type": "loki", "uid": "${lokids}"},
              "expr": "{namespace=~\"$log_namespace\"} |~ \"(?i)(error|panic|fatal|OOMKilled)\" !~ \"(?i)(metrics|healthz|readyz|livez|level=info)\"",
              "legendFormat": "",
              "refId": "A"
            }
          ]
        }
      ],
      "refresh": "30s",
      "schemaVersion": 39,
      "tags": ["platform", "landing-zone", "overview"],
      "templating": {
        "list": [
          {
            "current": {"selected": false, "text": "Prometheus", "value": "Prometheus"},
            "hide": 0,
            "includeAll": false,
            "label": "Data Source",
            "multi": false,
            "name": "datasource",
            "options": [],
            "query": "prometheus",
            "queryValue": "",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
          },
          {
            "current": {"selected": false, "text": "Loki", "value": "Loki"},
            "hide": 0,
            "includeAll": false,
            "label": "Loki",
            "multi": false,
            "name": "lokids",
            "options": [],
            "query": "loki",
            "queryValue": "",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
          },
          {
            "allValue": ".+",
            "current": {"selected": false, "text": "All", "value": "$__all"},
            "datasource": {"type": "loki", "uid": "${lokids}"},
            "definition": "label_values({job=~\".+\"}, namespace)",
            "hide": 0,
            "includeAll": true,
            "label": "Log Namespace",
            "multi": true,
            "name": "log_namespace",
            "options": [],
            "query": "label_values({job=~\".+\"}, namespace)",
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 1,
            "type": "query"
          }
        ]
      },
      "time": {"from": "now-1h", "to": "now"},
      "timepicker": {},
      "timezone": "browser",
      "title": "Platform Landing Zone",
      "uid": "platform-landing-zone",
      "version": 1
    }
