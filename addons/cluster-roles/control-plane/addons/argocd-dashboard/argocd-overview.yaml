apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-overview-dashboard
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
  annotations:
    grafana_folder: "ArgoCD"
data:
  argocd-overview.json: |
    {
      "annotations": {"list": [{"builtIn": 1, "datasource": {"type": "grafana", "uid": "-- Grafana --"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard"}]},
      "description": "ArgoCD application sync status, health overview, sync operations, reconciliation performance, and git activity",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 1,
      "id": null,
      "links": [{"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": false, "tags": [], "targetBlank": true, "title": "ArgoCD UI", "tooltip": "Open ArgoCD Dashboard", "type": "link", "url": "https://argocd.cluster.integratn.tech"}],
      "panels": [
        {"collapsed": false, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0}, "id": 100, "title": "Application Overview", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Total number of ArgoCD-managed applications across all projects. Use the Project filter above to scope to a specific team or domain. A sudden drop may indicate accidental app deletion or ArgoCD connectivity issues.",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 0, "y": 1},
          "id": 1,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Total Applications",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(argocd_app_info{project=~\"$project\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Applications where the live cluster state matches the desired state in git. This should be close to Total Apps \u2014 any gap means drift exists between git and the cluster.",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 4, "y": 1},
          "id": 2,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Synced",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(argocd_app_info{project=~\"$project\", sync_status=\"Synced\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Applications where cluster state doesn't match git. Brief OutOfSync during deploys is normal. Sustained OutOfSync (>30min) indicates failed syncs, merge conflicts, or disabled auto-sync \u2014 check the ArgoCD UI for sync errors.",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 8, "y": 1},
          "id": 3,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "OutOfSync",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(argocd_app_info{project=~\"$project\", sync_status!=\"Synced\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Applications with all Kubernetes resources running and healthy. This is the target state for every app. If Healthy < Total, investigate the difference using the health distribution chart below.",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 12, "y": 1},
          "id": 4,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Healthy",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(argocd_app_info{project=~\"$project\", health_status=\"Healthy\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Applications with failed or unhealthy resources. Degraded apps have pods crashing, services unreachable, or resources in error state. Investigate immediately by clicking through to ArgoCD UI.",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 16, "y": 1},
          "id": 5,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Degraded",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(argocd_app_info{project=~\"$project\", health_status=\"Degraded\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Applications currently progressing (deploying), suspended (paused), or in unknown/missing state. Progressing is normal during rollouts. Sustained Missing or Unknown status indicates ArgoCD can't determine resource health \u2014 check for CRDs without health checks.",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "orange", "value": null}]}}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 20, "y": 1},
          "id": 6,
          "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "title": "Progressing / Other",
          "type": "stat",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count(argocd_app_info{project=~\"$project\", health_status=~\"Progressing|Missing|Unknown|Suspended\"}) or vector(0)", "legendFormat": "", "refId": "A", "instant": true}]
        },
        {"collapsed": false, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 5}, "id": 101, "title": "Status Distribution", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Distribution of sync statuses across all applications. A healthy cluster shows nearly all apps as Synced. Use this to quickly assess overall GitOps compliance \u2014 OutOfSync apps mean the cluster has drifted from the git source of truth.",
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}}, "overrides": [{"matcher": {"id": "byName", "options": "Synced"}, "properties": [{"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "OutOfSync"}, "properties": [{"id": "color", "value": {"fixedColor": "red", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "Unknown"}, "properties": [{"id": "color", "value": {"fixedColor": "orange", "mode": "fixed"}}]}]},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 6},
          "id": 7,
          "options": {"reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""}, "pieType": "donut", "tooltip": {"mode": "multi", "sort": "desc"}, "legend": {"displayMode": "table", "placement": "right", "values": ["value", "percent"]}},
          "title": "Sync Status Distribution",
          "type": "piechart",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count by (sync_status) (argocd_app_info{project=~\"$project\"})", "legendFormat": "{{ sync_status }}", "refId": "A", "instant": true}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Distribution of health statuses. Healthy should dominate. Progressing is normal during deploys. Degraded and Missing require immediate attention \u2014 these apps have resources that are failing or can't be found.",
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}}, "overrides": [{"matcher": {"id": "byName", "options": "Healthy"}, "properties": [{"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "Progressing"}, "properties": [{"id": "color", "value": {"fixedColor": "blue", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "Degraded"}, "properties": [{"id": "color", "value": {"fixedColor": "red", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "Missing"}, "properties": [{"id": "color", "value": {"fixedColor": "orange", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "Suspended"}, "properties": [{"id": "color", "value": {"fixedColor": "purple", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "Unknown"}, "properties": [{"id": "color", "value": {"fixedColor": "yellow", "mode": "fixed"}}]}]},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 6},
          "id": 8,
          "options": {"reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""}, "pieType": "donut", "tooltip": {"mode": "multi", "sort": "desc"}, "legend": {"displayMode": "table", "placement": "right", "values": ["value", "percent"]}},
          "title": "Health Status Distribution",
          "type": "piechart",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "count by (health_status) (argocd_app_info{project=~\"$project\"})", "legendFormat": "{{ health_status }}", "refId": "A", "instant": true}]
        },
        {"collapsed": false, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 14}, "id": 102, "title": "Sync Operations", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Sync operations grouped by outcome over time. Succeeded is normal \u2014 Failed or Error syncs need investigation. Correlate spikes with git commits or ArgoCD configuration changes. A burst of failures often indicates a bad commit or misconfigured Helm values.",
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "drawStyle": "bars", "fillOpacity": 80, "lineWidth": 1, "pointSize": 5, "showPoints": "never", "stacking": {"group": "A", "mode": "normal"}}, "unit": "short"}, "overrides": [{"matcher": {"id": "byName", "options": "Succeeded"}, "properties": [{"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "Failed"}, "properties": [{"id": "color", "value": {"fixedColor": "red", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "Error"}, "properties": [{"id": "color", "value": {"fixedColor": "orange", "mode": "fixed"}}]}]},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 15},
          "id": 9,
          "options": {"legend": {"calcs": ["sum"], "displayMode": "table", "placement": "bottom", "sortBy": "Total", "sortDesc": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "title": "Sync Operations Over Time",
          "type": "timeseries",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum by (phase) (increase(argocd_app_sync_total{project=~\"$project\"}[$__rate_interval]))", "legendFormat": "{{ phase }}", "refId": "A"}]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "ArgoCD notification delivery count by service and template. Confirms sync events are being forwarded to Alertmanager and then to Matrix. If deliveries drop to zero while syncs are happening, the notification pipeline is broken \u2014 check the notifications controller logs.",
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "drawStyle": "bars", "fillOpacity": 60, "lineWidth": 1, "pointSize": 5, "showPoints": "never", "stacking": {"group": "A", "mode": "normal"}}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 15},
          "id": 10,
          "options": {"legend": {"calcs": ["sum"], "displayMode": "table", "placement": "bottom"}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "title": "Notification Deliveries",
          "type": "timeseries",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum by (template) (increase(argocd_notification_deliveries_total[$__rate_interval]))", "legendFormat": "{{ template }}", "refId": "A"}]
        },
        {"collapsed": false, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 23}, "id": 103, "title": "Reconciliation & Git", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Time for ArgoCD to reconcile an application's desired vs actual state. p50 shows typical performance, p99 shows worst case. High p99 values (>30s) may indicate complex apps with many resources, slow git repos, or resource-intensive Helm charts that take long to render.",
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "drawStyle": "line", "fillOpacity": 10, "lineWidth": 2, "pointSize": 5, "showPoints": "never"}, "unit": "s"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 24},
          "id": 11,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom"}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "title": "App Reconciliation Duration",
          "type": "timeseries",
          "targets": [
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "histogram_quantile(0.50, sum by (le) (rate(argocd_app_reconcile_bucket{namespace=\"argocd\"}[5m])))", "legendFormat": "p50", "refId": "A"},
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "histogram_quantile(0.95, sum by (le) (rate(argocd_app_reconcile_bucket{namespace=\"argocd\"}[5m])))", "legendFormat": "p95", "refId": "B"},
            {"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "histogram_quantile(0.99, sum by (le) (rate(argocd_app_reconcile_bucket{namespace=\"argocd\"}[5m])))", "legendFormat": "p99", "refId": "C"}
          ]
        },
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Rate of git operations (ls-remote, fetch) by ArgoCD. High rates indicate frequent polling or many repos. Sustained high fetch rates could mean ArgoCD is re-cloning repos repeatedly \u2014 check repo-server disk space and cache health. Spikes correlate with webhook triggers or manual syncs.",
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "drawStyle": "line", "fillOpacity": 20, "lineWidth": 2, "pointSize": 5, "showPoints": "auto"}, "unit": "reqps"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 24},
          "id": 12,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom"}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "title": "Git Request Rate",
          "type": "timeseries",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "sum by (request_type) (rate(argocd_git_request_total[5m]))", "legendFormat": "{{ request_type }}", "refId": "A"}]
        },
        {"collapsed": false, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 32}, "id": 104, "title": "Application Detail", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "${datasource}"},
          "description": "Comprehensive status of every ArgoCD application. Sort by Sync Status or Health Status columns to quickly find problem apps. Use the Project filter at the top to scope to a specific team or domain.",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "custom": {"align": "auto", "cellOptions": {"type": "auto"}, "inspect": false}}, "overrides": [{"matcher": {"id": "byName", "options": "Sync Status"}, "properties": [{"id": "mappings", "value": [{"type": "value", "options": {"Synced": {"text": "\u2713 Synced", "color": "green", "index": 0}, "OutOfSync": {"text": "\u2717 OutOfSync", "color": "red", "index": 1}, "Unknown": {"text": "? Unknown", "color": "orange", "index": 2}}}]}, {"id": "custom.cellOptions", "value": {"type": "color-background", "mode": "basic"}}]}, {"matcher": {"id": "byName", "options": "Health Status"}, "properties": [{"id": "mappings", "value": [{"type": "value", "options": {"Healthy": {"text": "\u2713 Healthy", "color": "green", "index": 0}, "Degraded": {"text": "\u2717 Degraded", "color": "red", "index": 1}, "Progressing": {"text": "\u21bb Progressing", "color": "blue", "index": 2}, "Missing": {"text": "\u2205 Missing", "color": "orange", "index": 3}, "Suspended": {"text": "\u23f8 Suspended", "color": "purple", "index": 4}, "Unknown": {"text": "? Unknown", "color": "yellow", "index": 5}}}]}, {"id": "custom.cellOptions", "value": {"type": "color-background", "mode": "basic"}}]}]},
          "gridPos": {"h": 10, "w": 24, "x": 0, "y": 33},
          "id": 13,
          "options": {"showHeader": true, "sortBy": [{"desc": false, "displayName": "Sync Status"}], "cellHeight": "sm", "footer": {"show": true, "countRows": true, "reducer": ["count"]}},
          "title": "Application Status Table",
          "type": "table",
          "targets": [{"datasource": {"type": "prometheus", "uid": "${datasource}"}, "expr": "argocd_app_info{project=~\"$project\"}", "format": "table", "instant": true, "refId": "A"}],
          "transformations": [{"id": "organize", "options": {"excludeByName": {"Time": true, "Value": true, "__name__": true, "instance": true, "job": true, "namespace": true, "dest_server": true, "operation": true}, "indexByName": {"name": 0, "project": 1, "sync_status": 2, "health_status": 3, "dest_namespace": 4, "repo": 5}, "renameByName": {"name": "Application", "project": "Project", "sync_status": "Sync Status", "health_status": "Health Status", "dest_namespace": "Namespace", "repo": "Repository"}}}]
        }
      ],
      "refresh": "30s",
      "schemaVersion": 39,
      "tags": ["argocd", "gitops"],
      "templating": {"list": [
        {"current": {"selected": false, "text": "Prometheus", "value": "Prometheus"}, "hide": 0, "includeAll": false, "label": "Data Source", "multi": false, "name": "datasource", "options": [], "query": "prometheus", "queryValue": "", "refresh": 1, "regex": "", "skipUrlSync": false, "type": "datasource"},
        {"allValue": ".*", "current": {"selected": false, "text": "All", "value": "$__all"}, "datasource": {"type": "prometheus", "uid": "${datasource}"}, "definition": "label_values(argocd_app_info, project)", "hide": 0, "includeAll": true, "label": "Project", "multi": true, "name": "project", "options": [], "query": "label_values(argocd_app_info, project)", "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 1, "type": "query"}
      ]},
      "time": {"from": "now-6h", "to": "now"},
      "timepicker": {},
      "timezone": "browser",
      "title": "ArgoCD Overview",
      "uid": "argocd-overview",
      "version": 1
    }
