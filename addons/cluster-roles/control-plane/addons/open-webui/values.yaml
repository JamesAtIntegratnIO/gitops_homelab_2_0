# Open WebUI Helm values (chart v12.5.0) â€” external Ollama, Pipelines enabled
ollama:
  enabled: false

ollamaUrls:
  - "http://10.0.3.4:11434"

pipelines:
  enabled: true
  extraEnvVars: []

image:
  tag: ""  # Use chart default

resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    memory: 1Gi

persistence:
  enabled: true
  size: 2Gi
  storageClass: config-nfs-client
  accessModes:
    - ReadWriteOnce

ingress:
  enabled: false

# Native Gateway API HTTPRoute (new in chart v12+)
route:
  enabled: true
  apiVersion: gateway.networking.k8s.io/v1
  kind: HTTPRoute
  hostnames:
    - "chat.cluster.integratn.tech"
  parentRefs:
    - name: nginx-gateway
      namespace: nginx-gateway
      sectionName: https
  httpsRedirect: false

# Disable websocket redis (single replica, not needed)
websocket:
  enabled: false

extraEnvVars:
  - name: WEBUI_SECRET_KEY
    valueFrom:
      secretKeyRef:
        name: open-webui-secrets
        key: secret-key
  - name: ENABLE_RAG_WEB_SEARCH
    value: "false"
  - name: RAG_EMBEDDING_ENGINE
    value: "ollama"
  - name: RAG_EMBEDDING_MODEL
    value: "nomic-embed-text"
  - name: RAG_OPENAI_API_BASE_URL
    value: "http://10.0.3.4:11434"
  - name: ENABLE_SIGNUP
    value: "false"
  - name: DEFAULT_USER_ROLE
    value: "user"
