applicationName: radarr
extraObjects:
  - apiVersion: v1
    kind: PersistentVolume
    metadata:
      name: radarr-config-pv
      labels:
        app: radarr
      annotations:
        pv.kubernetes.io/provisioned-by: k8s-sigs.io/nfs-subdir-external-provisioner
    spec:
      accessModes:
        - ReadWriteOnce
      capacity:
        storage: 1Gi
      nfs:
        path: /mnt/user/kube_storage/radarr-config-pvc
        server: 10.0.0.12
      persistentVolumeReclaimPolicy: Retain
      storageClassName: config-nfs-client
      volumeMode: Filesystem
  - apiVersion: v1
    kind: PersistentVolumeClaim
    metadata:
      name: radarr-config-pvc
      namespace: media
      labels:
        app: radarr
    spec:
      storageClassName: config-nfs-client
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 1Gi
      volumeName: radarr-config-pv
  - apiVersion: v1
    kind: PersistentVolume
    metadata:
      name: radarr-media-pv
      labels:
        app: radarr
      annotations:
        pv.kubernetes.io/provisioned-by: k8s-sigs.io/data-nfs-subdir-external-provisioner
    spec:
      accessModes:
        - ReadWriteOnce
      capacity:
        storage: 1Gi
      nfs:
        path: /mnt/user/data
        server: 10.0.0.12
      persistentVolumeReclaimPolicy: Retain
      storageClassName: data-nfs-client
      volumeMode: Filesystem
  - apiVersion: v1
    kind: PersistentVolumeClaim
    metadata:
      name: radarr-media-pvc
      namespace: media
      labels:
        app: radarr
    spec:
      storageClassName: data-nfs-client
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 1Gi
      volumeName: radarr-media-pv
deployment:
  securityContext:
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
  containerSecurityContext:
    runAsNonRoot: true
    runAsUser: 1000
    runAsGroup: 1000
    readOnlyRootFilesystem: false
  image:
    repository: ghcr.io/linuxserver/radarr
    tag: latest
    pullPolicy: IfNotPresent
  ports:
    - name: http
      containerPort: 7878
      protocol: TCP
  env:
    TZ:
      value: America/Denver
    PUID:
      value: "1000"
    PGID:
      value: "1000"
    PUSHOVER_DEBUG:
      value: "false"
    RADARR__AUTHENTICATION_METHOD:
      value: External
    RADARR__AUTHENTICATION_REQUIRED:
      value: DisabledForLocalAddresses
    RADARR__INSTANCE_NAME:
      value: Radarr
    RADARR__PORT:
      value: "7878"
    RADARR__LOG_LEVEL:
      value: info
    RADARR__THEME:
      value: dark
  additionalContainers:
    - name: exportarr
      image: ghcr.io/onedr0p/exportarr:latest
      command:
        - /exportarr
      args:
        - radarr
      ports:
        - name: metrics
          containerPort: 9707
          protocol: TCP
      env:
        - name: PORT
          value: "9707"
        - name: URL
          value: http://localhost:7878
        - name: APIKEY
          valueFrom:
            secretKeyRef:
              name: homepage-secret
              key: HOMEPAGE_VAR_RADARR_KEY
  volumes:
    config:
      persistentVolumeClaim:
        claimName: radarr-config-pvc
    media:
      persistentVolumeClaim:
        claimName: radarr-media-pvc
  volumeMounts:
    config:
      mountPath: /config
    media:
      mountPath: /data
persistence:
  enabled: false
service:
  additionalLabels:
    prometheus: media-cluster
  ports:
    - name: http
      port: 7878
      targetPort: 7878
      protocol: TCP
    - name: metrics
      port: 9707
      targetPort: 9707
      protocol: TCP
serviceMonitor:
  enabled: true
httpRoute:
  enabled: true
  parentRefs:
    - name: nginx-gateway
      namespace: nginx-gateway
      sectionName: https-public
  hostnames:
    - radarr.integratn.tech
  rules:
    - backendRefs:
        - name: radarr
          port: 7878
      matches:
        - path:
            type: PathPrefix
            value: /
certificate:
  enabled: true
  secretName: radarr-tls
  dnsNames:
    - radarr.integratn.tech
  commonName: radarr.integratn.tech
  subject: {}
  usages:
    - digital signature
    - key encipherment
    - server auth
  issuerRef:
    name: letsencrypt-prod
    kind: ClusterIssuer
